{
  "version": 3,
  "sources": ["../../alpinejs/src/reactivity.js", "../../alpinejs/src/entangle.js"],
  "sourcesContent": ["\nimport { scheduler } from './scheduler'\n\nlet reactive, effect, release, raw\n\nlet shouldSchedule = true\nexport function disableEffectScheduling(callback) {\n    shouldSchedule = false\n\n    callback()\n\n    shouldSchedule = true\n}\n\nexport function setReactivityEngine(engine) {\n    reactive = engine.reactive\n    release = engine.release\n    effect = (callback) => engine.effect(callback, { scheduler: task => {\n        if (shouldSchedule) {\n            scheduler(task)\n        } else {\n            task()\n        }\n    } })\n    raw = engine.raw\n}\n\nexport function overrideEffect(override) { effect = override }\n\nexport function elementBoundEffect(el) {\n    let cleanup = () => {}\n\n    let wrappedEffect = (callback) => {\n        let effectReference = effect(callback)\n\n        if (! el._x_effects) {\n            el._x_effects = new Set\n\n            // Livewire depends on el._x_runEffects.\n            el._x_runEffects = () => { el._x_effects.forEach(i => i()) }\n        }\n\n        el._x_effects.add(effectReference)\n\n        cleanup = () => {\n            if (effectReference === undefined) return\n\n            el._x_effects.delete(effectReference)\n\n            release(effectReference)\n        }\n\n        return effectReference\n    }\n\n    return [wrappedEffect, () => { cleanup() }]\n}\n\nexport function watch(getter, callback) {\n    let firstTime = true\n\n    let oldValue\n\n    let effectReference = effect(() => {\n        let value = getter()\n\n        // JSON.stringify touches every single property at any level enabling deep watching\n        JSON.stringify(value)\n\n        if (! firstTime) {\n            // We have to queue this watcher as a microtask so that\n            // the watcher doesn't pick up its own dependencies.\n            queueMicrotask(() => {\n                callback(value, oldValue)\n\n                oldValue = value\n            })\n        } else {\n            oldValue = value\n        }\n\n        firstTime = false\n    })\n\n    return () => release(effectReference)\n}\n\nexport {\n    release,\n    reactive,\n    effect,\n    raw,\n}\n", "import { effect, release } from './reactivity'\n\nexport function entangle({ get: outerGet, set: outerSet }, { get: innerGet, set: innerSet }) {\n    let firstRun = true\n    let outerHash\n    let innerHash\n\n    let reference = effect(() => {\n        let outer = outerGet()\n        let inner = innerGet()\n\n        if (firstRun) {\n            innerSet(cloneIfObject(outer))\n            firstRun = false\n        } else {\n            let outerHashLatest = JSON.stringify(outer)\n            let innerHashLatest = JSON.stringify(inner)\n\n            if (outerHashLatest !== outerHash) { // If outer changed...\n                innerSet(cloneIfObject(outer))\n            } else if (outerHashLatest !== innerHashLatest) { // If inner changed...\n                outerSet(cloneIfObject(inner))\n            } else { // If nothing changed...\n                // Prevent an infinite loop...\n            }\n        }\n\n        outerHash = JSON.stringify(outerGet())\n        innerHash = JSON.stringify(innerGet())\n    })\n\n    return () => {\n        release(reference)\n    }\n}\n\nfunction cloneIfObject(value) {\n    return typeof value === 'object'\n        ? JSON.parse(JSON.stringify(value))\n        : value\n}\n"],
  "mappings": ";;;AAGA,IAAc;AAAd,IAAsB;;;ACDf,SAAS,SAAS,EAAE,KAAK,UAAU,KAAK,SAAS,GAAG,EAAE,KAAK,UAAU,KAAK,SAAS,GAAG;AACzF,MAAI,WAAW;AACf,MAAI;AACJ,MAAI;AAEJ,MAAI,YAAY,OAAO,MAAM;AACzB,QAAI,QAAQ,SAAS;AACrB,QAAI,QAAQ,SAAS;AAErB,QAAI,UAAU;AACV,eAAS,cAAc,KAAK,CAAC;AAC7B,iBAAW;AAAA,IACf,OAAO;AACH,UAAI,kBAAkB,KAAK,UAAU,KAAK;AAC1C,UAAI,kBAAkB,KAAK,UAAU,KAAK;AAE1C,UAAI,oBAAoB,WAAW;AAC/B,iBAAS,cAAc,KAAK,CAAC;AAAA,MACjC,WAAW,oBAAoB,iBAAiB;AAC5C,iBAAS,cAAc,KAAK,CAAC;AAAA,MACjC,OAAO;AAAA,MAEP;AAAA,IACJ;AAEA,gBAAY,KAAK,UAAU,SAAS,CAAC;AACrC,gBAAY,KAAK,UAAU,SAAS,CAAC;AAAA,EACzC,CAAC;AAED,SAAO,MAAM;AACT,YAAQ,SAAS;AAAA,EACrB;AACJ;AAEA,SAAS,cAAc,OAAO;AAC1B,SAAO,OAAO,UAAU,WAClB,KAAK,MAAM,KAAK,UAAU,KAAK,CAAC,IAChC;AACV;",
  "names": []
}
